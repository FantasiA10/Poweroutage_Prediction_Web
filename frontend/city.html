<!DOCTYPE html>
<style>
	@import url(style.css);
</style>
<html lang="en">
  <head>
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.css" />
	<style>
		html {
			height: 100%
		}

		body {
			height: 80%;
			width: 50%;
			margin: 0;
			padding: 0;
		}

		#map {
			height: 100%
		}
	</style>
	<link rel="stylesheet" href="gh-pages.css" />
  </head>

  <body>
	<div id="map"></div>
	<script src="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.js"></script>
	<script src = "catiline.js"></script>
    <script src = "leaflet.shpfile.js"></script>
    <script>
		function getColor(d) {
    		return d > 1000 ? '#800026' :
           	d > 500  ? '#BD0026' :
           	d > 200  ? '#E31A1C' :
           	d > 100  ? '#FC4E2A' :
           	d > 50   ? '#FD8D3C' :
           	d > 20   ? '#FEB24C' :
           	d > 10   ? '#FED976' :
                      '#FFEDA0';
		}

		function style(feature) {
    		return {
        	fillColor: getColor(feature.properties.COUNTYFP),
        	weight: 2,
        	opacity: 1,
        	color: 'white',
        	dashArray: '3',
        	fillOpacity: 0.7
    		};
		}

      	var m = L.map('map').setView([44.09618442380296, -120.5045166015625], 7);
		var watercolor = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
			attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'
		  }).addTo(m);
		//modify for different input file and variables
     	var shpfile = new L.Shapefile('tl_2021_41_cousub.zip', {
			onEachFeature: function(feature, layer) {
				if (feature.properties) {
					layer.bindPopup(Object.keys(feature.properties).map(function(k) {
						if (k == 'LSAD'){
							return k + ": " + feature.properties[k]  + "<br />";
						}
						return ;
					}).join(""), {
						maxHeight: 200,
					});
				}
			}
		}, {style: {fill: 'yellow',
			weight: 2,
        	opacity: 1,
        	color: 'white',
        	dashArray: '3',
        	fillOpacity: 1}});
		shpfile.addTo(m);
		L.shapefile('tl_2021_41_cousub.zip', {style: {fill: 'yellow',
			weight: 2,
        	opacity: 1,
        	color: 'white',
        	dashArray: '3',
        	fillOpacity: 1}}).addTo(map);
		shpfile.once("data:loaded", function() {
			console.log("finished loaded shapefile");
		});
    </script>
  </body>
</html>